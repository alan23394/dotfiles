#!/bin/sh

# Default string for the date portion
[ -z "$date_string" ] && date_string="%a, %b %d,"
[ -z "$short_date_string" ] && short_date_string="%-m/%d"

# Check if there is an override for the style
[ -f "time_style" ] && style="$(cat time_style)"
# Assume style is normal if it isn't decimal
[ "$style" != "decimal" ] && style=normal

# Calculate decimal time if style is decimal
if [ "$style" == "decimal" ]; then
	seconds_of_today=$(( $(date '+(%-H * 3600) + (%-M * 60) + %-S') ))

	decimal_seconds=$(( $seconds_of_today * 100000 / 86400 ));

	seconds=$(( $decimal_seconds % 100 ))
	decimal_seconds=$(( $decimal_seconds  / 100 ))

	minutes=$(( $decimal_seconds % 100 ))
	decimal_seconds=$(( $decimal_seconds / 100 ))

	hours=$decimal_seconds

	time_string="$(printf "%d:%02d:%02d" $hours $minutes $seconds)"
else
	time_string="%H:%M:%S"
fi

full_time="$(date +"$date_string $time_string")"
short_time="$(date +"$short_date_string $time_string")"

echo "$full_time"
echo "$short_time"
echo "$color"
